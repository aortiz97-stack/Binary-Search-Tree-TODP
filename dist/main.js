(()=>{"use strict";function l(l){return l%2==0?l/2-1:l/2-1.5}function t(n,e,h=[]){let i,d=n,r=e;if(0===d.length&&0===r.length)return h;function o(t){i=t.shift();const n=l(i.length),e=n+1;return d=t.slice(0,n+1),r=t.slice(e),i}return void 0===d[0]&&void 0!==r[0]?i=o(r):void 0!==d[0]&&void 0===r[0]?i=o(d):d[0]<r[0]?i=d.shift():d[0]>=r[0]&&(i=r.shift()),h.push(i),t(d,r,h)}function n(e){if(e.length<2)return e;const h=l(e.length),i=h+1;return t(n(e.slice(0,h+1)),n(e.slice(i)))}const e=l=>({data:l,leftChild:null,rightChild:null,parent:null}),h=(l=>{let t=(()=>{let t=new Set(l);return t=Array.from(t),n(t)})();const h=()=>t,i=l=>{t=l},d=(l=0,t=h().length-1)=>{if(l>t)return null;const n=Math.floor((t+l)/2),i=e(h()[n]),r=d(l,n-1),o=d(n+1,t);return i.leftChild=r,i.rightChild=o,null!==r&&(r.parent=i),null!==o&&(o.parent=i),i},r=(l,t="",n=!0)=>{null!==l.rightChild&&r(l.rightChild,`${t}${n?"│   ":"    "}`,!1),console.log(`${t}${n?"└── ":"┌── "}${l.data}`),null!==l.leftChild&&r(l.leftChild,`${t}${n?"    ":"│   "}`,!0)};let o=d();const u=()=>o,s=l=>{o=l},a=(l,t=u())=>{const d=e(l);h().push(l);const r=n(Array.from(new Set(h())));i(r);const o=t;return null===o||d.data===o.data?o:d.data<o.data?null===o.leftChild?(o.leftChild=d,d.parent=o,o):a(l,o.leftChild):d.data>o.data?null===o.rightChild?(o.rightChild=d,d.parent=o,o):a(l,o.rightChild):o},C=(l,t=[u()])=>{const n=t,e=t.pop();return e.data===l?e:null===e.leftChild&&null===e.rightChild&&e.data!==l&&0===t.length?null:(null!==e.leftChild&&n.push(e.leftChild),null!==e.rightChild&&n.push(e.rightChild),C(l,n))},f=(l,t=[u().data],n=[])=>{const e=t.shift(),h=C(e);return n.includes(e)||n.push(e),0===t.length&&null===h.leftChild&&null===h.rightChild?void 0!==l?l(n):n:(null!==h.leftChild&&t.push(h.leftChild.data),null!==h.rightChild&&t.push(h.rightChild.data),f(l,t,n))},g=(l,t=[u().data],n=[])=>{const e=t.pop(),h=C(e);return n.includes(e)||n.push(e),null===h.leftChild&&null===h.rightChild&&0===t.length?void 0!==l?l(n):n:(null!==h.rightChild&&t.push(h.rightChild.data),null!==h.leftChild&&t.push(h.leftChild.data),g(l,t,n))},p=(l,t=[u().data],n=[])=>{if(0===t.length)return void 0!==l?l(n):n;const e=t.pop(),h=C(e);if(null===e){const e=t.pop();return n.push(e),p(l,t,n)}if(null===h)return void 0!==l?l(n):n;if(null===h.leftChild&&null===h.rightChild){n.push(e);const h=t.pop();return void 0!==h&&n.push(h),p(l,t,n)}return null===h.leftChild?(null!==h.rightChild&&t.push(h.rightChild.data),n.push(e),p(l,t,n)):null===h.rightChild?(t.push(null),t.push(e),null!==h.leftChild&&t.push(h.leftChild.data),p(l,t,n)):(null!==h.rightChild&&t.push(h.rightChild.data),t.push(e),t.push(h.leftChild.data),p(l,t,n))},c=(l,t=[u().data],n=[])=>{if(0===t.length)return void 0!==l?l(n):n;let e=t.pop(),h=C(e);return null===e&&(e=t.pop(),h=C(e)),null===h?void 0!==l?l(n):n:null===h.leftChild&&null===h.rightChild||function(){const l=null!==h.rightChild&&null!==h.leftChild&&n.includes(h.leftChild.data)&&n.includes(h.rightChild.data),t=null!==h.rightChild&&null===h.leftChild&&n.includes(h.rightChild.data),e=null!==h.leftChild&&null===h.rightChild&&n.includes(h.leftChild.data);return l||t||e}()?(n.push(e),c(l,t,n)):null===h.rightChild&&null!==h.leftChild?(n.includes(e)||t.push(e),t.push(null),n.includes(h.leftChild.data)||t.push(h.leftChild.data),c(t,n)):null===h.leftChild&&null!==h.rightChild&&n.includes(h.rightChild.data)?(n.push(e),c(l,t,n)):(t.push(e),null===h.rightChild||n.includes(h.rightChild.data)||t.push(h.rightChild.data),null===h.leftChild||n.includes(h.leftChild.data)||t.push(h.leftChild.data),c(l,t,n))},v=(l,t=[{node:l,nodeHeight:0}],n=[])=>{const e=t.pop();if(n.push(e),null===e.node.leftChild&&null===e.node.rightChild&&0===t.length){let l=0;for(let t=0;t<n.length;t+=1){const e=n[t];e.nodeHeight>l&&(l=e.nodeHeight)}return l}if(null!==e.node.rightChild){const l={node:e.node.rightChild,nodeHeight:e.nodeHeight+1};t.push(l)}if(null!==e.node.leftChild){const l={node:e.node.leftChild,nodeHeight:e.nodeHeight+1};t.push(l)}return v(l,t,n)},$=(l,t=[{node:u(),nodeDepth:0}])=>{const n=t.pop();if(n.node===l)return n.nodeDepth;if(null!==n.node.rightChild){const l={node:n.node.rightChild,nodeDepth:n.nodeDepth+1};t.push(l)}if(null!==n.node.leftChild){const l={node:n.node.leftChild,nodeDepth:n.nodeDepth+1};t.push(l)}return $(l,t)},y=()=>{const l=[],t=p((function(l){const t=[];for(let n=0;n<l.length;n+=1){const e=C(l[n]);null===e.leftChild&&null===e.rightChild&&t.push(e)}return t}));for(let n=0;n<t.length;n+=1){const e=$(t[n]);l.push(e)}const e=n(l);return e[e.length-1]-e[e.length-2]<=1};return{getSortedArray:h,getMainRoot:u,prettyPrint:r,insertNode:a,levelOrder:f,find:C,deleteNode:l=>{const t=C(l);if(t.data===u().data){const l=Math.floor((0+h().length-1)/2);h().splice(l,1),s(d())}else if(null===t.leftChild&&null===t.rightChild){const{parent:l}=t;l.leftChild===t?l.leftChild=null:l.rightChild===t&&(l.rightChild=null),t.parent=null}else{t.parent=null;const l=l=>l===t.data,e=h().findIndex(l);h().splice(e,1);const r=n(Array.from(new Set(h())));i(r),s(d())}},preorder:g,inorder:p,postorder:c,height:v,depth:$,isBalanced:y,rebalance:()=>{if(!y()){const l=p(),t=n(Array.from(new Set(l)));i(t),s(d())}}}})(function(){const l=Math.floor(100*(Math.random()+1)),t=[];for(let n=0;n<l;n+=1){const l=Math.floor(100*(Math.random()+1));t.push(l)}return t}());console.log(h.getSortedArray()),console.log(h.prettyPrint(h.getMainRoot())),console.log(h.isBalanced()),console.log(`preOrder: ${h.preorder()}\n`),console.log(`inOrder: ${h.inorder()}\n`),console.log(`postorder: ${h.postorder()}\n`)})();